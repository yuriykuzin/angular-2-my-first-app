{"version":3,"sources":["app/slider.component.ts"],"names":[],"mappings":"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","file":"slider.component.js","sourcesContent":["import { Component, forwardRef, OnInit } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\n\nconst noop = () => {\n  // Empty intentionally\n};\n\nexport const CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR: any = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MySliderComponent),\n    multi: true\n};\n\n@Component({\n    selector: 'my-slider',\n    template: `\n    <div class=\"custom-div-slider\" (window:resize)=\"handleSlider()\">\n      <div class=\"custom-div-slider__popup\">{{formatCurrency(value)}}</div>\n      <input type=\"range\" (onload)=\"handleSlider()\" (change)=\"handleSlider()\" \n        (input)=\"handleSlider()\" [(ngModel)]=\"value\" class=\"custom-div-slider__input\" id=\"myslider\" max=\"4000\" />\n    </div>\n    `,\n    styleUrls: ['./app/slider.component.css'],\n    providers: [CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR]\n})\nexport class MySliderComponent implements ControlValueAccessor, OnInit {\n\n    // The internal data model\n    private innerValue: string;\n\n    // Placeholders for the callbacks which are later providesd\n    // by the Control Value Accessor\n    private onTouchedCallback: () => void = noop;\n    private onChangeCallback: (_: any) => void = noop;\n    private slider: any;\n    private sliderStyle: any;\n    private sliderPopup: any;\n    ngOnInit() {\n      this.slider = document.querySelector('#myslider');\n      let st = document.createElement('style');\n      st.id = 's_myslider';\n      document.head.appendChild(st);\n      this.sliderStyle = document.getElementById('s_myslider');\n      this.sliderPopup = document.querySelector('.custom-div-slider__popup');\n      this.slider.value = 1000;\n      this.handleSlider();\n    }\n\n    // get accessor\n    get value(): string {\n        return this.innerValue;\n    };\n\n    // set accessor including call the onchange callback\n    set value(v: string) {\n        if (v !== this.innerValue) {\n            this.innerValue = v;\n            this.onChangeCallback(v);\n        }\n    }\n\n    // From ControlValueAccessor interface\n    writeValue(value: any) {\n        if (value !== this.innerValue) {\n            this.innerValue = value;\n        }\n    }\n    // From ControlValueAccessor interface\n    registerOnChange(fn: any) {\n        this.onChangeCallback = fn;\n    }\n    // From ControlValueAccessor interface\n    registerOnTouched(fn: any) {\n        this.onTouchedCallback = fn;\n    }\n    handleSlider() {\n      let gradValue = this.slider.value / this.slider.getAttribute('max') * this.slider.clientWidth;\n      this.sliderStyle.textContent = '#myslider::-webkit-slider-runnable-track { background-size: ' +\n        (gradValue + (this.slider.value < 2000 ? 1 : -1)) + 'px 100%, 100% }';\n      let koeff = this.slider.value / this.slider.getAttribute('max') * 16;\n      this.sliderPopup.style.left = gradValue - koeff - 28 + 'px';\n    }\n    formatCurrency(val: number): string {\n        return String(Math.round(val)).replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, '$1 ') + ' $';\n    }\n}\n"]}